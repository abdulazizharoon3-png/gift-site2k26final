<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Year Surprise üéÅ</title>
<style>
html, body {
  margin:0; padding:0; overflow:hidden; font-family:Arial,sans-serif;
  height:100%; width:100%; background:#0c0c0c; color:white; text-align:center; position:relative;
}
.screen {
  position:absolute; top:0; left:0; width:100%; height:100%; display:flex;
  flex-direction:column; justify-content:center; align-items:center;
  opacity:0; pointer-events:none; transition: all 0.5s ease; transform:scale(0.95);
}
.active {opacity:1; pointer-events:auto; transform:scale(1);}
button {
  padding:15px 30px; font-size:20px; border:none; border-radius:12px;
  margin-top:20px; cursor:pointer; background: linear-gradient(45deg,#ff3cac,#784ba0,#2b86c5); color:white;
}
input {
  padding:12px; font-size:18px; border-radius:10px; border:2px solid white; text-align:center; margin-top:20px;
}
#giftIcon {font-size:60px; cursor:pointer; animation:bounce 1s infinite;}
@keyframes bounce {0%,100%{transform:translateY(0);}50%{transform:translateY(-20px);}}
canvas {position:absolute; top:0; left:0; pointer-events:none;}
h1, h2 {padding:0 20px; line-height:1.5em;}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<!-- Start Screen -->
<div id="start" class="screen active">
  <h1 id="startText"></h1>
  <button onclick="goName()">Start</button>
</div>

<!-- Name Input -->
<div id="name" class="screen">
  <h2 id="nameText"></h2>
  <input id="username" placeholder="Your Name">
  <button onclick="checkName()">Next</button>
</div>

<!-- Ariba Verification -->
<div id="verifyAriba" class="screen">
  <h2 id="verifyText"></h2>
  <input id="verifyInput" placeholder="Type Secret Phrase">
  <button onclick="checkVerification()">Verify</button>
</div>

<!-- Ariba Pages -->
<div id="aribaPages" class="screen"></div>

<!-- Habiba Pages -->
<div id="habibaPages" class="screen"></div>

<!-- Habiba Gift Box -->
<div id="habibaGift" class="screen">
  <div id="giftIcon">üéÅ</div>
</div>

<!-- Generic Gift Screen -->
<div id="giftScreen" class="screen"><div id="giftIcon">üéÅ</div></div>

<!-- Generic Final Screen -->
<div id="genericFinal" class="screen">
  <h2 id="finalText"></h2>
</div>

<script>
// ---- Canvas Effects ----
let canvas = document.getElementById('canvas');
let ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;

// Floating Hearts
let hearts = [];
for(let i=0;i<20;i++){
  hearts.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*15+5, speed:Math.random()*0.5+0.2, opacity:Math.random()*0.4+0.3});
}

// Confetti
let confetti = [];
function Confetti(){ this.x=Math.random()*canvas.width; this.y=Math.random()*canvas.height-50; this.vx=(Math.random()-0.5)*2.5; this.vy=Math.random()*2+1; this.color=`hsl(${Math.random()*360},100%,50%)`; this.draw=function(){ctx.fillStyle=this.color; ctx.fillRect(this.x,this.y,5,10); this.x+=this.vx; this.y+=this.vy; if(this.y>canvas.height)this.y=-10;}}

// Fireworks
let fireworks=[];
function Firework(x,y,color){ this.x=x; this.y=y; this.particles=[]; for(let i=0;i<30;i++){this.particles.push({x:x,y:y,vx:(Math.random()-0.5)*5,vy:(Math.random()-0.5)*5,alpha:1,color:color});} this.draw=function(){ this.particles.forEach(p=>{ctx.fillStyle=`rgba(${p.color.r},${p.color.g},${p.color.b},${p.alpha})`; ctx.beginPath(); ctx.arc(p.x,p.y,3,0,Math.PI*2); ctx.fill(); p.x+=p.vx; p.y+=p.vy; p.alpha-=0.03;}); this.particles=this.particles.filter(p=>p.alpha>0); }}

// Animate
function animate(){ ctx.clearRect(0,0,canvas.width,canvas.height); hearts.forEach(h=>{ctx.fillStyle=`rgba(255,0,150,${h.opacity})`; ctx.beginPath(); ctx.arc(h.x,h.y,h.size,0,Math.PI*2); ctx.fill(); h.y-=h.speed; if(h.y<0)h.y=canvas.height;}); confetti.forEach(c=>c.draw()); fireworks.forEach(f=>f.draw()); fireworks=fireworks.filter(f=>f.particles.length>0); requestAnimationFrame(animate);}
animate();

// ---- Screens ----
function show(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active')); document.getElementById(id).classList.add('active');}
function goName(){ show('name'); }

// ---- Typewriter Effect ----
function typeWriter(el, text, speed=40, callback){
  el.innerHTML="";
  let i=0;
  function run(){
    if(i<text.length){
      el.innerHTML+=text.charAt(i);
      i++;
      setTimeout(run,speed);
    } else if(callback) callback();
  }
  run();
}

// ---- Name Check ----
function checkName(){
  let name = document.getElementById('username').value.toLowerCase().trim();
  if(name==='ariba'){ show('verifyAriba'); typeWriter(document.getElementById('verifyText'),"Verification Required üõ°Ô∏è"); }
  else if(name==='habiba'){ startHabibaFlow(); }
  else{ show('giftScreen'); }
}

// ---- Ariba Verification ----
function checkVerification(){
  let input = document.getElementById('verifyInput').value.toLowerCase().trim();
  if(input==="aweee mera bacha"){ startAribaFlow(); }
  else{
    show('aribaPages');
    typeWriter(document.getElementById('aribaPages'),"u aint my Didi gtfo üñï");
  }
}

// ---- Ariba Flow ----
const aribaMessages=[
  "Didi? üíñ",
  "Is it really u? ü•π",
  "I really love you ‚ù§Ô∏è‚Äçü©π",
  "You‚Äôre the best ü•∞",
  "You kinda understood me like no one ever did üòå",
  "I felt comfortable around you like I never did around anyone else üíñ",
  "The Head Scratch ‚ù§Ô∏è‚Äçü©π",
  "The Tea Spill üíÖ",
  "Aapka vo waala message really made me throw my phone ü•π",
  "‚ù§Ô∏è‚Äçü©π ‚ÄúDidi‚Ä¶ you are unlike anyone I‚Äôve ever met...‚Äù",
  "I can laugh with you, cry with you, and share thoughts I never dared before...",
  "Your words, your smile, your care have touched me more deeply than I can express...",
  "Every memory we shared is a treasure...",
  "Happy New Year Didi ‚ù§Ô∏è‚Äçü©π‚ù§Ô∏è‚Äçü©πüéâüéÜ"
];
let currentAriba=0;
function startAribaFlow(){ currentAriba=0; show('aribaPages'); showAribaMessage();}
function showAribaMessage(){
  let container = document.getElementById('aribaPages');
  container.innerHTML = '';
  let h = document.createElement('h2');
  container.appendChild(h);
  typeWriter(h, aribaMessages[currentAriba]);
  let btn=document.createElement('button');
  btn.innerText='Next';
  btn.onclick=function(){
    currentAriba++;
    if(currentAriba<aribaMessages.length){ showAribaMessage(); burstConfetti(); if(currentAriba>=2) burstFireworks();}
  };
  container.appendChild(btn);
  burstConfetti(); burstFireworks();
}

// ---- Habiba Flow ----
let habibaStep=0, habibaPresses=0;
function startHabibaFlow(){
  habibaStep=0; habibaPresses=0; show('habibaPages'); showHabibaMessage();
}
function showHabibaMessage(){
  let container=document.getElementById('habibaPages');
  container.innerHTML='';
  let h=document.createElement('h2');
  container.appendChild(h);
  let btn=document.createElement('button'); btn.innerText='Next';

  if(habibaStep===0){
    typeWriter(h,"New Year but it aint Happy for you üíÖ");
    btn.onclick=function(){ habibaStep=1; showHabibaMessage(); };
  } else if(habibaStep===1){
    typeWriter(h,"wwwwwhhhaaaaaaaaaaat? Why u still heeeeeeeerreeeee? I alr said no Happy New years for you üíÖ");
    btn.onclick=function(){
      habibaPresses++;
      if(habibaPresses<3){
        btn.style.position='absolute';
        btn.style.top=Math.random()*(window.innerHeight-50)+'px';
        btn.style.left=Math.random()*(window.innerWidth-120)+'px';
      } else { habibaStep=2; showHabibaMessage(); }
    };
  } else if(habibaStep===2){
    typeWriter(h,"Alr fine If u want it that bad tell ayyanu babu to wish it to u Me nai kar rahaü§ß",()=>{ show('habibaGift'); });
  }
  container.appendChild(btn);
  burstConfetti(); burstFireworks();
}

// ---- Habiba Gift Box ----
document.querySelector('#habibaGift #giftIcon').onclick=function(){
  let gift=this;
  gift.innerText='ü§°';
  gift.style.fontSize='100px';
  burstConfetti(); burstFireworks();
}

// ---- Generic Gift Box Flow ----
document.querySelectorAll('#giftScreen #giftIcon').forEach(el=>{
  el.onclick=function(){
    let gift=this;
    let top=window.innerHeight/2;
    let flyInterval=setInterval(()=>{
      if(top<-100){ clearInterval(flyInterval); show('genericFinal'); return; }
      top-=10;
      gift.style.transform=`translateY(${top}px) scale(1.2)`;
      burstConfetti(); if(top%40===0) burstFireworks();
    },50);
  }
});

// ---- Particles ----
function burstFireworks(){ for(let i=0;i<3;i++){ let color={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255)}; fireworks.push(new Firework(Math.random()*canvas.width, Math.random()*canvas.height/2, color)); } }
function burstConfetti(){ for(let i=0;i<20;i++) confetti.push(new Confetti()); }
</script>
</body>
</html>
