<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Year Surprise üéÅ</title>
<style>
html, body {
  margin:0; padding:0; overflow:hidden; font-family:Arial,sans-serif;
  height:100%; width:100%; background:#0c0c0c; color:white; text-align:center; position:relative;
}
.screen {
  position:absolute; top:0; left:0; width:100%; height:100%; display:flex;
  flex-direction:column; justify-content:center; align-items:center;
  opacity:0; pointer-events:none; transition: all 0.8s ease; transform:scale(0.95);
}
.active {opacity:1; pointer-events:auto; transform:scale(1);}
button {
  padding:15px 30px; font-size:20px; border:none; border-radius:12px;
  margin-top:20px; cursor:pointer; background: linear-gradient(45deg,#ff3cac,#784ba0,#2b86c5); color:white;
  position:relative;
}
input {
  padding:12px; font-size:18px; border-radius:10px; border:2px solid white; text-align:center; margin-top:20px;
}
#giftIcon {font-size:60px; cursor:pointer; animation:bounce 1s infinite;}
@keyframes bounce {0%,100%{transform:translateY(0);}50%{transform:translateY(-20px);}}
canvas {position:absolute; top:0; left:0; pointer-events:none;}
h2,h1 {padding:0 20px; line-height:1.5em;}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<!-- Start Screen -->
<div id="start" class="screen active">
  <h1 id="startText"></h1>
  <button onclick="goName()">Start</button>
</div>

<!-- Name Input Screen -->
<div id="name" class="screen">
  <h2 id="nameText"></h2>
  <input id="username" placeholder="Your Name">
  <button onclick="checkName()">Next</button>
</div>

<!-- Ariba/Habiba Pages Container -->
<div id="aribaPages" class="screen"></div>

<!-- Generic Screens -->
<div id="giftScreen" class="screen"><div id="giftIcon">üéÅ</div></div>
<div id="genericFinal" class="screen">
  <h2 id="finalText"></h2>
</div>

<script>
// Canvas setup
let canvas=document.getElementById('canvas');
let ctx=canvas.getContext('2d');
canvas.width=window.innerWidth; canvas.height=window.innerHeight;

// Floating hearts
let hearts=[];
for(let i=0;i<20;i++){
  hearts.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, size:Math.random()*15+5, speed:Math.random()*0.5+0.2, opacity:Math.random()*0.4+0.3});
}

// Confetti particles
let confetti=[];
function Confetti(){
  this.x=Math.random()*canvas.width;
  this.y=Math.random()*canvas.height-50;
  this.vx=(Math.random()-0.5)*2.5;
  this.vy=Math.random()*2+1;
  this.color=`hsl(${Math.random()*360},100%,50%)`;
  this.draw=function(){ctx.fillStyle=this.color; ctx.fillRect(this.x,this.y,5,10); this.x+=this.vx; this.y+=this.vy; if(this.y>canvas.height)this.y=-10;}
}

// Fireworks
let fireworks=[];
function Firework(x,y,color){
  this.x=x; this.y=y; this.particles=[];
  for(let i=0;i<30;i++){
    this.particles.push({x:x,y:y,vx:(Math.random()-0.5)*5,vy:(Math.random()-0.5)*5,alpha:1,color:color});
  }
  this.draw=function(){
    this.particles.forEach(p=>{ctx.fillStyle=`rgba(${p.color.r},${p.color.g},${p.color.b},${p.alpha})`; ctx.beginPath(); ctx.arc(p.x,p.y,3,0,Math.PI*2); ctx.fill(); p.x+=p.vx; p.y+=p.vy; p.alpha-=0.03;});
    this.particles=this.particles.filter(p=>p.alpha>0);
  }
}

function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  hearts.forEach(h=>{ctx.fillStyle=`rgba(255,0,150,${h.opacity})`; ctx.beginPath(); ctx.arc(h.x,h.y,h.size,0,Math.PI*2); ctx.fill(); h.y-=h.speed; if(h.y<0)h.y=canvas.height;});
  confetti.forEach(c=>c.draw());
  fireworks.forEach(f=>f.draw());
  fireworks=fireworks.filter(f=>f.particles.length>0);
  requestAnimationFrame(animate);
}
animate();

// Typewriter function
function typeWriter(text, container, callback){
  container.innerHTML='';
  let i=0;
  function typing(){
    if(i<text.length){
      container.innerHTML += text.charAt(i);
      i++;
      setTimeout(typing,30);
    } else if(callback){
      callback();
    }
  }
  typing();
}

// Screens
function show(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active')); document.getElementById(id).classList.add('active');}

// Start screen text
typeWriter("üéâ Ready for a Surprise?", document.getElementById('startText'));

// Name screen text
typeWriter("Enter Your Name üí´", document.getElementById('nameText'));

// Generic final text
typeWriter(`üåü ‚ÄúAs the old year folds its final page, may your heart be lighter and your dreams soar higher.
May laughter follow you like sunlight, and may every step you take in the new year be guided by hope, joy, and unforgettable moments.
Here‚Äôs to 365 new chances, countless smiles, and the magic of new beginnings.
Happy New Year! üéÜ‚ú®‚Äù`, document.getElementById('finalText'));

// Name check
function checkName(){
  let name = document.getElementById('username').value.toLowerCase().trim();
  
  if(name === 'ariba'){
    showVerificationScreen();
  } else if(name === 'habiba'){
    startHabibaFlow();
  } else {
    show('giftScreen');
  }
}

// Ariba verification
function showVerificationScreen(){
  let container = document.getElementById('aribaPages');
  container.innerHTML = '';
  show('aribaPages');

  let h = document.createElement('h2');
  typeWriter('Verification Required üõ°Ô∏è', h);
  container.appendChild(h);

  let input = document.createElement('input');
  input.id = 'verifyInput';
  input.placeholder = 'Type the secret phrase';
  container.appendChild(input);

  let btn = document.createElement('button');
  btn.innerText = 'Verify';
  btn.onclick = checkVerification;
  container.appendChild(btn);

  input.focus();
}

function checkVerification(){
  let phrase = document.getElementById('verifyInput').value.toLowerCase().trim();
  if(phrase === 'aweee mera bacha'){
    startAribaFlow();
  } else {
    let container = document.getElementById('aribaPages');
    typeWriter('u aint my Didi gtfo üñï', container);
  }
}

// Ariba messages
const aribaMessages=[
  "Didi? üíñ",
  "Is it really u? ü•π",
  "I really love you ‚ù§Ô∏è‚Äçü©π",
  "You‚Äôre the best ü•∞",
  "You kinda understood me like no one ever did üòå",
  "I felt comfortable around you like I never did around anyone else üíñ",
  "The Head Scratch ‚ù§Ô∏è‚Äçü©π",
  "The Tea Spill üíÖ",
  "Aapka vo waala message really made me throw my phone ü•π",
  "‚ù§Ô∏è‚Äçü©π ‚ÄúDidi‚Ä¶ you are unlike anyone I‚Äôve ever met. You see me in ways no one else did, and being around you feels like coming home.‚Äù",
  "I can laugh with you, cry with you, and share thoughts I never dared before. Every moment with you feels safe, comforting, magical, like the world pauses just for us.",
  "Your words, your smile, your care have touched me more deeply than I can express. You are my favorite bari behn, my safe space, my inspiration, my laughter, and my heart.",
  "Every memory we shared is a treasure, and I can‚Äôt wait to make countless more with you. You are truly special, unforgettable, and I absolutely love you ü•π‚ù§Ô∏è‚Äçü©π. This surprise is all for you because no one deserves it more. ‚ù§Ô∏è‚Äçü©πüíñ‚Äù",
  "Happy New Year Didi ‚ù§Ô∏è‚Äçü©π‚ù§Ô∏è‚Äçü©πüéâüéÜ"
];
let currentAriba = 0;

function startAribaFlow(){
  currentAriba = 0;
  show('aribaPages');
  showAribaMessage();
}

function showAribaMessage(){
  let container = document.getElementById('aribaPages');
  typeWriter(aribaMessages[currentAriba], container, ()=>{
    let btn = document.createElement('button');
    btn.innerText = 'Next';
    btn.onclick = function(){
      currentAriba++;
      if(currentAriba < aribaMessages.length){
        showAribaMessage();
        burstConfetti();
        if(currentAriba >= 2) burstFireworks();
      }
    };
    container.appendChild(btn);
  });
  burstConfetti();
  if(currentAriba >= 2) burstFireworks();
}

// Habiba flow
const habibaScreens = [
  "New Year but it aint Happy for you üíÖ",
  "wwwwwhhhaaaaaaaaaaat? Why u still heeeeeeeerreeeee? I alr said no Happy New years for you üíÖ",
  "Alr fine If u want it that bad tell ayyanu babu to wish it to u Me nai kar rahaü§ß"
];
let habibaStep=0;
let habibaPressCount=0;

function startHabibaFlow(){
  habibaStep = 0;
  habibaPressCount = 0;
  show('aribaPages');
  showHabibaMessage();
}

function showHabibaMessage(){
  let container = document.getElementById('aribaPages');
  typeWriter(habibaScreens[habibaStep], container, ()=>{
    let btn = document.createElement('button');
    btn.innerText = 'Next';
    btn.onclick = function(){
      if(habibaStep===1){
        habibaPressCount++;
        if(habibaPressCount<3){
          btn.style.position='absolute';
          btn.style.top = Math.random()*(window.innerHeight-50)+'px';
          btn.style.left = Math.random()*(window.innerWidth-150)+'px';
        } else {
          habibaStep++;
          habibaPressCount=0;
          showHabibaMessage();
        }
      } else {
        habibaStep++;
        if(habibaStep<habibaScreens.length){
          showHabibaMessage();
        }
      }
    };
    container.appendChild(btn);
  });
  burstConfetti();
  if(habibaStep>=1) burstFireworks();
}

// GENERIC FLOW
document.getElementById('giftIcon').onclick=function(){
  let gift=this;
  let top=window.innerHeight/2;
  let flyInterval=setInterval(()=>{
    if(top<-100){ clearInterval(flyInterval); show('genericFinal'); return; }
    top-=10;
    gift.style.transform=`translateY(${top}px) scale(1.2)`;
    burstConfetti();
    if(top%40===0) burstFireworks();
  },50);
}

// PARTICLES
function burstFireworks(){
  for(let i=0;i<3;i++){
    let color={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255)};
    fireworks.push(new Firework(Math.random()*canvas.width, Math.random()*canvas.height/2, color));
  }
}
function burstConfetti(){
  for(let i=0;i<20;i++) confetti.push(new Confetti());
}
</script>
</body>
</html>
